import React from 'react';
import '../styles/VulnerabilityReport.css';

function VulnerabilityReport({ report, loading }) {
  if (loading) {
    return <div className="report-loading">Analyzing contract...</div>;
  }

  if (!report) {
    return <div className="report-empty">Upload and analyze a contract to see results</div>;
  }

  const getSeverityClass = (severity) => {
    return `severity-${severity.toLowerCase()}`;
  };

  return (
    <div className="vulnerability-report">
      <div className="report-header">
        <h3>Analysis Report</h3>
        <div className="risk-score">
          <span>Risk Score: </span>
          <span className={`score ${report.risk_score > 50 ? 'high' : 'low'}`}>
            {report.risk_score}/100
          </span>
        </div>
      </div>
      
      <p className="summary">{report.summary}</p>
      
      <div className="vulnerabilities-list">
        {report.vulnerabilities.length === 0 ? (
          <div className="no-vulnerabilities">âœ“ No vulnerabilities detected</div>
        ) : (
          report.vulnerabilities.map((vuln, index) => (
            <div key={index} className={`vulnerability-item ${getSeverityClass(vuln.severity)}`}>
              <div className="vuln-header">
                <span className="vuln-type">{vuln.type}</span>
                <span className={`vuln-severity ${getSeverityClass(vuln.severity)}`}>
                  {vuln.severity}
                </span>
              </div>
              <div className="vuln-line">Line {vuln.line}</div>
              <div className="vuln-description">{vuln.description}</div>
              <div className="vuln-recommendation">
                <strong>Recommendation:</strong> {vuln.recommendation}
              </div>
            </div>
          ))
        )}
      </div>
    </div>
  );
}

export default VulnerabilityReport;
